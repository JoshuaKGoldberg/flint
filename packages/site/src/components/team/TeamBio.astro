---
import { Icon } from "@astrojs/starlight/components";
import InlineMarkdown from "../InlineMarkdown.astro";
import type { StarlightIcon } from "@astrojs/starlight/types";

export interface Props {
	description: string;
	extras?: string[];
	links?: [StarlightIcon, string][];
	name: string;
	username: string;
}

const {
	description,
	extras,
	links = [],
	username,
	name = username,
} = Astro.props;
---

<li class="team-bio">
	<div class="team-bio-card">
		<div class="avatar-area">
			<img alt="" class="avatar" src={`/team/${username}.webp`} />
		</div>
		<div class="texts">
			<strong class="name">{name}</strong>
			<p class="description">{description}</p>
		</div>
		<ol class="services">
			{
				[["github", `https://github.com/${username}`] as const, ...links]
					.sort(([a], [b]) => a.localeCompare(b))
					.map(([service, url]) => (
						<li class="service">
							<a
								aria-label={`${name}'s ${service}'`}
								href={url}
								target="_blank"
							>
								<Icon name={service} />
							</a>
						</li>
					))
			}
		</ol>
	</div>
	{
		extras && (
			<div class="extras">
				{extras.map((extra) => (
					<InlineMarkdown class="extra" markdown={extra} />
				))}
			</div>
		)
	}
</li>

<style>
	.team-bio {
		--square-size: 9rem;
		display: flex;
		gap: 1.5rem;
		list-style: none;
		margin-top: 0;
	}

	.team-bio:not(:only-child) {
		max-width: calc(50% - 3rem);
	}

	.team-bio-card {
		display: flex;
		flex-direction: column;
		width: var(--square-size);
	}

	.avatar-area {
		width: var(--square-size);
		flex-basis: fit-content;
	}

	.avatar {
		height: var(--square-size);
		width: var(--square-size);
	}

	.texts {
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
		margin-top: 0.75rem;
	}

	.name {
		font-size: 0.9rem;
	}

	.description {
		font-size: 0.85rem;
	}

	.services {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		list-style-type: none;
		padding-left: 0;
	}

	.service {
		margin-top: 0;
	}

	.extras {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		margin: 0;
	}
</style>
