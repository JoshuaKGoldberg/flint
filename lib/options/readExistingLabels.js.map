{"version":3,"file":"readExistingLabels.js","names":[],"sources":["../../src/options/readExistingLabels.ts"],"sourcesContent":["import { TakeInput } from \"bingo\";\nimport { githubDefaultLabels } from \"github-default-labels\";\nimport { OutcomeLabel } from \"set-github-repository-labels\";\n\nimport { inputFromOctokit } from \"../inputs/inputFromOctokit.js\";\n\nexport async function readExistingLabels(\n\ttake: TakeInput,\n\tgetOwner: () => Promise<string | undefined>,\n\tgetRepository: () => Promise<string | undefined>,\n) {\n\tconst [owner, repository] = await Promise.all([getOwner(), getRepository()]);\n\n\t// When transitioning an existing repo, it should already have labels\n\tconst existingLabelsActual =\n\t\towner &&\n\t\trepository &&\n\t\t((await take(inputFromOctokit, {\n\t\t\tendpoint: \"GET /repos/{owner}/{repo}/labels\",\n\t\t\toptions: {\n\t\t\t\towner,\n\t\t\t\trepo: repository,\n\t\t\t},\n\t\t})) as OutcomeLabel[] | undefined);\n\n\tif (existingLabelsActual) {\n\t\t// The labels API includes more properties than we use\n\t\treturn existingLabelsActual.map((label) => ({\n\t\t\tcolor: label.color,\n\t\t\tdescription: label.description,\n\t\t\tname: label.name,\n\t\t}));\n\t}\n\n\t// In setup mode, options evaluate before creating the repository.\n\t// We'd want the owner's defaults in case they've customized them...\n\t// ...except, GitHub doesn't have an API for this üôÅ.\n\t// We instead go with the known default labels:\n\treturn githubDefaultLabels;\n}\n"],"mappings":";;;;AAMA,eAAsB,mBACrB,MACA,UACA,eACC;CACD,MAAM,CAAC,OAAO,cAAc,MAAM,QAAQ,IAAI,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;CAG5E,MAAM,uBACL,SACA,cACE,MAAM,KAAK,kBAAkB;EAC9B,UAAU;EACV,SAAS;GACR;GACA,MAAM;GACN;EACD,CAAC;AAEH,KAAI,qBAEH,QAAO,qBAAqB,KAAK,WAAW;EAC3C,OAAO,MAAM;EACb,aAAa,MAAM;EACnB,MAAM,MAAM;EACZ,EAAE;AAOJ,QAAO"}