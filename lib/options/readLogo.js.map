{"version":3,"file":"readLogo.js","names":[],"sources":["../../src/options/readLogo.ts"],"sourcesContent":["import * as fs from \"node:fs/promises\";\n\nimport { readLogoSizing } from \"./readLogoSizing.js\";\n\nexport async function readLogo(getReadme: () => Promise<string>) {\n\tconst tag = /\\n<img.+src=.+>/.exec(await getReadme())?.[0];\n\n\tif (!tag) {\n\t\treturn undefined;\n\t}\n\n\tconst alt =\n\t\t/alt=['\"](.+)['\"]\\s*src=/.exec(tag)?.[1].split(/['\"]?\\s*\\w+=/)[0] ??\n\t\t\"Project logo\";\n\n\tif (/All Contributors: \\d+/.test(alt)) {\n\t\treturn undefined;\n\t}\n\n\tconst src = /src\\s*=(.+)['\"/]>/\n\t\t.exec(tag)?.[1]\n\t\t?.split(/\\s*\\w+=/)[0]\n\t\t.replaceAll(/^['\"]|['\"]$/g, \"\");\n\n\tif (!src || src.includes(\"//img.shields.io\")) {\n\t\treturn undefined;\n\t}\n\n\t// TODO: imageSize does not go through take(input*), making it harder to test.\n\t// It takes either a string (fs access) or buffer data (not in bingo-fs).\n\t// https://github.com/JoshuaKGoldberg/create-typescript-app/issues/1993\n\tconst bufferData = await fs.readFile(src);\n\n\treturn {\n\t\talt,\n\t\tsrc,\n\t\t...readLogoSizing(bufferData),\n\t};\n}\n"],"mappings":";;;;AAIA,eAAsB,SAAS,WAAkC;CAChE,MAAM,MAAM,kBAAkB,KAAK,MAAM,WAAW,CAAC,GAAG;AAExD,KAAI,CAAC,IACJ;CAGD,MAAM,MACL,0BAA0B,KAAK,IAAI,GAAG,GAAG,MAAM,eAAe,CAAC,MAC/D;AAED,KAAI,wBAAwB,KAAK,IAAI,CACpC;CAGD,MAAM,MAAM,oBACV,KAAK,IAAI,GAAG,IACX,MAAM,UAAU,CAAC,GAClB,WAAW,gBAAgB,GAAG;AAEhC,KAAI,CAAC,OAAO,IAAI,SAAS,mBAAmB,CAC3C;AAQD,QAAO;EACN;EACA;EACA,GAAG,eALe,MAAM,GAAG,SAAS,IAAI,CAKX;EAC7B"}