{"version":3,"file":"readLogoSizing.js","names":[],"sources":["../../src/options/readLogoSizing.ts"],"sourcesContent":["import { imageSize } from \"image-size\";\n\nconst maximum = 128;\n\nexport interface OptionsLogoSizing {\n\theight?: number;\n\twidth?: number;\n}\n\nexport function readLogoSizing(src: Uint8Array): OptionsLogoSizing | undefined {\n\tconst size = imageSizeSafe(src);\n\tif (!size) {\n\t\treturn undefined;\n\t}\n\n\tif (!size.height) {\n\t\treturn size.width ? { width: Math.min(size.width, maximum) } : undefined;\n\t}\n\n\tif (!size.width) {\n\t\treturn { height: Math.min(size.height, maximum) };\n\t}\n\n\tif (size.height <= maximum && size.width <= maximum) {\n\t\treturn { height: size.height, width: size.width };\n\t}\n\n\treturn size.height > size.width\n\t\t? { height: maximum, width: (size.width / size.height) * maximum }\n\t\t: { height: (size.height / size.width) * maximum, width: maximum };\n}\n\nfunction imageSizeSafe(src: Uint8Array) {\n\ttry {\n\t\t// TODO: imageSize does not go through take(input*), making it harder to test.\n\t\t// It takes either a string (fs access) or buffer data (not in bingo-fs).\n\t\t// https://github.com/JoshuaKGoldberg/create-typescript-app/issues/1993\n\t\treturn imageSize(src);\n\t} catch {\n\t\treturn undefined;\n\t}\n}\n"],"mappings":";;;AAEA,MAAM,UAAU;AAOhB,SAAgB,eAAe,KAAgD;CAC9E,MAAM,OAAO,cAAc,IAAI;AAC/B,KAAI,CAAC,KACJ;AAGD,KAAI,CAAC,KAAK,OACT,QAAO,KAAK,QAAQ,EAAE,OAAO,KAAK,IAAI,KAAK,OAAO,QAAQ,EAAE,GAAG;AAGhE,KAAI,CAAC,KAAK,MACT,QAAO,EAAE,QAAQ,KAAK,IAAI,KAAK,QAAQ,QAAQ,EAAE;AAGlD,KAAI,KAAK,UAAU,WAAW,KAAK,SAAS,QAC3C,QAAO;EAAE,QAAQ,KAAK;EAAQ,OAAO,KAAK;EAAO;AAGlD,QAAO,KAAK,SAAS,KAAK,QACvB;EAAE,QAAQ;EAAS,OAAQ,KAAK,QAAQ,KAAK,SAAU;EAAS,GAChE;EAAE,QAAS,KAAK,SAAS,KAAK,QAAS;EAAS,OAAO;EAAS;;AAGpE,SAAS,cAAc,KAAiB;AACvC,KAAI;AAIH,SAAO,UAAU,IAAI;SACd;AACP"}