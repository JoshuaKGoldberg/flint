{"version":3,"file":"blockDevelopmentDocs.js","names":[],"sources":["../../src/blocks/blockDevelopmentDocs.ts"],"sourcesContent":["import { z } from \"zod\";\n\nimport { base } from \"../base.js\";\nimport { blockRemoveFiles } from \"./blockRemoveFiles.js\";\n\nconst zInnerSection = z.object({\n\tcontents: z.string(),\n\theading: z.string(),\n});\n\ntype InnerSection = z.infer<typeof zInnerSection>;\n\nfunction printInnerSection(innerSection: InnerSection) {\n\treturn [`### ${innerSection.heading}`, ``, innerSection.contents];\n}\n\nconst zSection = z.object({\n\tcontents: z\n\t\t.union([\n\t\t\tz.string(),\n\t\t\tz.object({\n\t\t\t\tafter: z.array(z.string()).optional(),\n\t\t\t\tbefore: z.string().optional(),\n\t\t\t\titems: z.array(z.string()).optional(),\n\t\t\t\tplural: z.string().optional(),\n\t\t\t}),\n\t\t])\n\t\t.optional(),\n\tinnerSections: z.array(zInnerSection).optional(),\n});\n\ntype Section = z.infer<typeof zSection>;\n\nfunction printSection(heading: string, section: Section) {\n\tconst innerSections = section.innerSections?.flatMap(printInnerSection) ?? [];\n\n\tif (section.contents === undefined) {\n\t\treturn innerSections;\n\t}\n\n\tconst contents =\n\t\ttypeof section.contents === \"string\"\n\t\t\t? { before: section.contents }\n\t\t\t: section.contents;\n\n\treturn [\n\t\t`## ${heading}`,\n\t\t``,\n\t\t...(contents.before ? [contents.before] : []),\n\t\t...(contents.items?.sort((a, b) =>\n\t\t\ta.replaceAll(\"`\", \"\").localeCompare(b.replaceAll(\"`\", \"\")),\n\t\t) ?? []),\n\t\t...(contents.items?.length && contents.plural ? [``, contents.plural] : []),\n\t\t...(contents.after ?? []),\n\t\t...innerSections,\n\t];\n}\n\nexport const blockDevelopmentDocs = base.createBlock({\n\tabout: {\n\t\tname: \"Development Docs\",\n\t},\n\taddons: {\n\t\thints: z.array(z.string()).default([]),\n\t\tsections: z.record(z.string(), zSection).default({}),\n\t},\n\tproduce({ addons, options }) {\n\t\tconst lines = [\n\t\t\t`# Development`,\n\t\t\t``,\n\t\t\t...(options.guide\n\t\t\t\t? [\n\t\t\t\t\t\t`> If you'd like a more guided walkthrough, see [${options.guide.title}](${options.guide.href}).`,\n\t\t\t\t\t\t`> It'll walk you through the common activities you'll need to contribute.`,\n\t\t\t\t\t\t``,\n\t\t\t\t\t]\n\t\t\t\t: []),\n\t\t\t`After [forking the repo from GitHub](https://help.github.com/articles/fork-a-repo) and [installing pnpm](https://pnpm.io/installation):`,\n\t\t\t``,\n\t\t\t`\\`\\`\\`shell`,\n\t\t\t`git clone https://github.com/(your-name-here)/${options.repository}`,\n\t\t\t`cd ${options.repository}`,\n\t\t\t`pnpm install`,\n\t\t\t`\\`\\`\\``,\n\t\t\t``,\n\t\t\t...(addons.hints.length ? [...addons.hints, ``] : []),\n\t\t\t...Object.entries(addons.sections)\n\t\t\t\t.sort(([a], [b]) => a.localeCompare(b))\n\t\t\t\t.flatMap(([heading, section]) => printSection(heading, section)),\n\t\t\t...(options.documentation.development\n\t\t\t\t? [options.documentation.development]\n\t\t\t\t: []),\n\t\t];\n\n\t\treturn {\n\t\t\tfiles: {\n\t\t\t\t\".github\": {\n\t\t\t\t\t\"DEVELOPMENT.md\": lines.join(\"\\n\"),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n\ttransition() {\n\t\treturn {\n\t\t\taddons: [blockRemoveFiles({ files: [\"DEVELOPMENT.md\"] })],\n\t\t};\n\t},\n});\n"],"mappings":";;;;;AAKA,MAAM,gBAAgB,EAAE,OAAO;CAC9B,UAAU,EAAE,QAAQ;CACpB,SAAS,EAAE,QAAQ;CACnB,CAAC;AAIF,SAAS,kBAAkB,cAA4B;AACtD,QAAO;EAAC,OAAO,aAAa;EAAW;EAAI,aAAa;EAAS;;AAGlE,MAAM,WAAW,EAAE,OAAO;CACzB,UAAU,EACR,MAAM,CACN,EAAE,QAAQ,EACV,EAAE,OAAO;EACR,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,UAAU;EACrC,QAAQ,EAAE,QAAQ,CAAC,UAAU;EAC7B,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,UAAU;EACrC,QAAQ,EAAE,QAAQ,CAAC,UAAU;EAC7B,CAAC,CACF,CAAC,CACD,UAAU;CACZ,eAAe,EAAE,MAAM,cAAc,CAAC,UAAU;CAChD,CAAC;AAIF,SAAS,aAAa,SAAiB,SAAkB;CACxD,MAAM,gBAAgB,QAAQ,eAAe,QAAQ,kBAAkB,IAAI,EAAE;AAE7E,KAAI,QAAQ,aAAa,OACxB,QAAO;CAGR,MAAM,WACL,OAAO,QAAQ,aAAa,WACzB,EAAE,QAAQ,QAAQ,UAAU,GAC5B,QAAQ;AAEZ,QAAO;EACN,MAAM;EACN;EACA,GAAI,SAAS,SAAS,CAAC,SAAS,OAAO,GAAG,EAAE;EAC5C,GAAI,SAAS,OAAO,MAAM,GAAG,MAC5B,EAAE,WAAW,KAAK,GAAG,CAAC,cAAc,EAAE,WAAW,KAAK,GAAG,CAAC,CAC1D,IAAI,EAAE;EACP,GAAI,SAAS,OAAO,UAAU,SAAS,SAAS,CAAC,IAAI,SAAS,OAAO,GAAG,EAAE;EAC1E,GAAI,SAAS,SAAS,EAAE;EACxB,GAAG;EACH;;AAGF,MAAa,uBAAuB,KAAK,YAAY;CACpD,OAAO,EACN,MAAM,oBACN;CACD,QAAQ;EACP,OAAO,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC;EACtC,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC,QAAQ,EAAE,CAAC;EACpD;CACD,QAAQ,EAAE,QAAQ,WAAW;EAC5B,MAAM,QAAQ;GACb;GACA;GACA,GAAI,QAAQ,QACT;IACA,mDAAmD,QAAQ,MAAM,MAAM,IAAI,QAAQ,MAAM,KAAK;IAC9F;IACA;IACA,GACA,EAAE;GACL;GACA;GACA;GACA,iDAAiD,QAAQ;GACzD,MAAM,QAAQ;GACd;GACA;GACA;GACA,GAAI,OAAO,MAAM,SAAS,CAAC,GAAG,OAAO,OAAO,GAAG,GAAG,EAAE;GACpD,GAAG,OAAO,QAAQ,OAAO,SAAS,CAChC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,cAAc,EAAE,CAAC,CACtC,SAAS,CAAC,SAAS,aAAa,aAAa,SAAS,QAAQ,CAAC;GACjE,GAAI,QAAQ,cAAc,cACvB,CAAC,QAAQ,cAAc,YAAY,GACnC,EAAE;GACL;AAED,SAAO,EACN,OAAO,EACN,WAAW,EACV,kBAAkB,MAAM,KAAK,KAAK,EAClC,EACD,EACD;;CAEF,aAAa;AACZ,SAAO,EACN,QAAQ,CAAC,iBAAiB,EAAE,OAAO,CAAC,iBAAiB,EAAE,CAAC,CAAC,EACzD;;CAEF,CAAC"}