{"version":3,"file":"blockNcc.js","names":[],"sources":["../../src/blocks/blockNcc.ts"],"sourcesContent":["import { z } from \"zod\";\n\nimport { base } from \"../base.js\";\nimport { blockCSpell } from \"./blockCSpell.js\";\nimport { blockDevelopmentDocs } from \"./blockDevelopmentDocs.js\";\nimport { blockESLint } from \"./blockESLint.js\";\nimport { blockGitHubActionsCI } from \"./blockGitHubActionsCI.js\";\nimport { blockPackageJson } from \"./blockPackageJson.js\";\nimport { blockPrettier } from \"./blockPrettier.js\";\n\nexport const blockNcc = base.createBlock({\n\tabout: {\n\t\tname: \"ncc\",\n\t},\n\taddons: {\n\t\tentry: z.string().optional(),\n\t},\n\tintake({ options }) {\n\t\treturn {\n\t\t\tentry: options.packageData?.scripts?.[\"build:release\"]?.match(\n\t\t\t\t/ncc build (.+) -o dist/,\n\t\t\t)?.[1],\n\t\t};\n\t},\n\tproduce({ addons }) {\n\t\tconst { entry = \"src/index.ts\" } = addons;\n\n\t\treturn {\n\t\t\taddons: [\n\t\t\t\tblockCSpell({\n\t\t\t\t\tignorePaths: [\"dist\"],\n\t\t\t\t}),\n\t\t\t\tblockDevelopmentDocs({\n\t\t\t\t\tsections: {\n\t\t\t\t\t\tBuilding: {\n\t\t\t\t\t\t\tcontents: `\nRun [TypeScript](https://typescriptlang.org) locally to type check and build source files from \\`src/\\` into output files in \\`lib/\\`:\n\n\\`\\`\\`shell\npnpm build\n\\`\\`\\`\n\nAdd \\`--watch\\` to run the builder in a watch mode that continuously cleans and recreates \\`lib/\\` as you save files:\n\n\\`\\`\\`shell\npnpm build --watch\n\\`\\`\\`\n`,\n\t\t\t\t\t\t\tinnerSections: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcontents: `\nRun [\\`@vercel/ncc\\`](https://github.com/vercel/ncc) to create an output \\`dist/\\` to be used in production.\n\n\\`\\`\\`shell\npnpm build:release\n\\`\\`\\`\n\t\t`,\n\t\t\t\t\t\t\t\t\theading: \"Building for Release\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tblockESLint({\n\t\t\t\t\tignores: [\"dist\"],\n\t\t\t\t}),\n\t\t\t\tblockGitHubActionsCI({\n\t\t\t\t\tjobs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"Build\",\n\t\t\t\t\t\t\tsteps: [{ run: \"pnpm build\" }],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"Build (Release)\",\n\t\t\t\t\t\t\tsteps: [{ run: \"pnpm build:release\" }],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t\tblockPackageJson({\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tdevDependencies: {\n\t\t\t\t\t\t\t\"@vercel/ncc\": \"^0.38.3\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\tscripts: {\n\t\t\t\t\t\t\tbuild: \"tsc\",\n\t\t\t\t\t\t\t\"build:release\": `ncc build ${entry} -o dist`,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tblockPrettier({\n\t\t\t\t\tignores: [\"/dist\"],\n\t\t\t\t}),\n\t\t\t],\n\t\t};\n\t},\n});\n"],"mappings":";;;;;;;;;;AAUA,MAAa,WAAW,KAAK,YAAY;CACxC,OAAO,EACN,MAAM,OACN;CACD,QAAQ,EACP,OAAO,EAAE,QAAQ,CAAC,UAAU,EAC5B;CACD,OAAO,EAAE,WAAW;AACnB,SAAO,EACN,OAAO,QAAQ,aAAa,UAAU,kBAAkB,MACvD,yBACA,GAAG,IACJ;;CAEF,QAAQ,EAAE,UAAU;EACnB,MAAM,EAAE,QAAQ,mBAAmB;AAEnC,SAAO,EACN,QAAQ;GACP,YAAY,EACX,aAAa,CAAC,OAAO,EACrB,CAAC;GACF,qBAAqB,EACpB,UAAU,EACT,UAAU;IACT,UAAU;;;;;;;;;;;;;IAaV,eAAe,CACd;KACC,UAAU;;;;;;;KAOV,SAAS;KACT,CACD;IACD,EACD,EACD,CAAC;GACF,YAAY,EACX,SAAS,CAAC,OAAO,EACjB,CAAC;GACF,qBAAqB,EACpB,MAAM,CACL;IACC,MAAM;IACN,OAAO,CAAC,EAAE,KAAK,cAAc,CAAC;IAC9B,EACD;IACC,MAAM;IACN,OAAO,CAAC,EAAE,KAAK,sBAAsB,CAAC;IACtC,CACD,EACD,CAAC;GACF,iBAAiB,EAChB,YAAY;IACX,iBAAiB,EAChB,eAAe,WACf;IACD,SAAS;KACR,OAAO;KACP,iBAAiB,aAAa,MAAM;KACpC;IACD,EACD,CAAC;GACF,cAAc,EACb,SAAS,CAAC,QAAQ,EAClB,CAAC;GACF,EACD;;CAEF,CAAC"}