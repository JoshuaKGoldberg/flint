{"version":3,"file":"intakeFileDefineConfig.js","names":[],"sources":["../../../src/blocks/intake/intakeFileDefineConfig.ts"],"sourcesContent":["import { IntakeDirectory } from \"bingo-fs\";\nimport JSON5 from \"json5\";\n\nimport { intakeFile } from \"./intakeFile.js\";\n\nexport function intakeFileDefineConfig(\n\tfiles: IntakeDirectory,\n\tfilePath: (string | string[])[],\n): Record<string, unknown> | undefined {\n\tconst file = intakeFile(files, filePath);\n\tif (!file) {\n\t\treturn undefined;\n\t}\n\n\tconst normalized = file[0].replaceAll(/[\\n\\r]/g, \"\");\n\tconst matched = /defineConfig\\(\\{(.+)\\}\\)\\s*(?:;\\s*)?$/u.exec(normalized);\n\tif (!matched) {\n\t\treturn undefined;\n\t}\n\n\tconst rawData = tryParseJSON5(`{${matched[1]}}`);\n\tif (!rawData || typeof rawData !== \"object\") {\n\t\treturn undefined;\n\t}\n\n\treturn rawData;\n}\n\nfunction tryParseJSON5(text: string) {\n\ttry {\n\t\t// eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n\t\treturn JSON5.parse(text) as Record<string, unknown> | undefined;\n\t} catch {\n\t\treturn undefined;\n\t}\n}\n"],"mappings":";;;;AAKA,SAAgB,uBACf,OACA,UACsC;CACtC,MAAM,OAAO,WAAW,OAAO,SAAS;AACxC,KAAI,CAAC,KACJ;CAGD,MAAM,aAAa,KAAK,GAAG,WAAW,WAAW,GAAG;CACpD,MAAM,UAAU,yCAAyC,KAAK,WAAW;AACzE,KAAI,CAAC,QACJ;CAGD,MAAM,UAAU,cAAc,IAAI,QAAQ,GAAG,GAAG;AAChD,KAAI,CAAC,WAAW,OAAO,YAAY,SAClC;AAGD,QAAO;;AAGR,SAAS,cAAc,MAAc;AACpC,KAAI;AAEH,SAAO,MAAM,MAAM,KAAK;SACjB;AACP"}