{"version":3,"file":"mergeAllExtensions.js","names":["entries: Record<string, Extension>"],"sources":["../../../src/blocks/eslint/mergeAllExtensions.ts"],"sourcesContent":["import { Extension, ExtensionRules } from \"./schemas.js\";\n\nexport function mergeAllExtensions(...extensions: Extension[]) {\n\tconst entries: Record<string, Extension> = {};\n\n\tfor (const extension of extensions) {\n\t\tconst filesKey = JSON.stringify(extension.files);\n\n\t\tentries[filesKey] =\n\t\t\tfilesKey in entries\n\t\t\t\t? mergeExtensions(entries[filesKey], extension, extension.files)\n\t\t\t\t: extension;\n\t}\n\n\treturn Object.values(entries);\n}\n\nfunction mergeExtensions(\n\ta: Extension,\n\tb: Extension,\n\tfiles: string[],\n): Extension {\n\treturn {\n\t\textends: Array.from(\n\t\t\tnew Set([...(a.extends ?? []), ...(b.extends ?? [])]),\n\t\t).sort(),\n\t\tfiles,\n\t\tlanguageOptions: (a.languageOptions ?? b.languageOptions) && {\n\t\t\t...(a.languageOptions ?? {}),\n\t\t\t...(b.languageOptions ?? {}),\n\t\t},\n\t\tlinterOptions: (a.linterOptions ?? b.linterOptions) && {\n\t\t\t...(a.linterOptions ?? {}),\n\t\t\t...(b.linterOptions ?? {}),\n\t\t},\n\t\tplugins: (a.plugins ?? b.plugins) && { ...a.plugins, ...b.plugins },\n\t\trules: mergeExtensionsRules(a.rules, b.rules),\n\t\tsettings: (a.settings ?? b.settings) && { ...a.settings, ...b.settings },\n\t};\n}\n\nfunction mergeExtensionsRules(\n\ta: ExtensionRules | undefined,\n\tb: ExtensionRules | undefined,\n): ExtensionRules | undefined {\n\tif (!a || !b) {\n\t\treturn a ?? b;\n\t}\n\n\tif (Array.isArray(a)) {\n\t\tif (Array.isArray(b)) {\n\t\t\treturn [...a, ...b];\n\t\t}\n\n\t\treturn [...a, { entries: b }];\n\t}\n\n\tif (Array.isArray(b)) {\n\t\treturn [...b, { entries: a }];\n\t}\n\n\treturn { ...a, ...b };\n}\n"],"mappings":";AAEA,SAAgB,mBAAmB,GAAG,YAAyB;CAC9D,MAAMA,UAAqC,EAAE;AAE7C,MAAK,MAAM,aAAa,YAAY;EACnC,MAAM,WAAW,KAAK,UAAU,UAAU,MAAM;AAEhD,UAAQ,YACP,YAAY,UACT,gBAAgB,QAAQ,WAAW,WAAW,UAAU,MAAM,GAC9D;;AAGL,QAAO,OAAO,OAAO,QAAQ;;AAG9B,SAAS,gBACR,GACA,GACA,OACY;AACZ,QAAO;EACN,SAAS,MAAM,KACd,IAAI,IAAI,CAAC,GAAI,EAAE,WAAW,EAAE,EAAG,GAAI,EAAE,WAAW,EAAE,CAAE,CAAC,CACrD,CAAC,MAAM;EACR;EACA,kBAAkB,EAAE,mBAAmB,EAAE,oBAAoB;GAC5D,GAAI,EAAE,mBAAmB,EAAE;GAC3B,GAAI,EAAE,mBAAmB,EAAE;GAC3B;EACD,gBAAgB,EAAE,iBAAiB,EAAE,kBAAkB;GACtD,GAAI,EAAE,iBAAiB,EAAE;GACzB,GAAI,EAAE,iBAAiB,EAAE;GACzB;EACD,UAAU,EAAE,WAAW,EAAE,YAAY;GAAE,GAAG,EAAE;GAAS,GAAG,EAAE;GAAS;EACnE,OAAO,qBAAqB,EAAE,OAAO,EAAE,MAAM;EAC7C,WAAW,EAAE,YAAY,EAAE,aAAa;GAAE,GAAG,EAAE;GAAU,GAAG,EAAE;GAAU;EACxE;;AAGF,SAAS,qBACR,GACA,GAC6B;AAC7B,KAAI,CAAC,KAAK,CAAC,EACV,QAAO,KAAK;AAGb,KAAI,MAAM,QAAQ,EAAE,EAAE;AACrB,MAAI,MAAM,QAAQ,EAAE,CACnB,QAAO,CAAC,GAAG,GAAG,GAAG,EAAE;AAGpB,SAAO,CAAC,GAAG,GAAG,EAAE,SAAS,GAAG,CAAC;;AAG9B,KAAI,MAAM,QAAQ,EAAE,CACnB,QAAO,CAAC,GAAG,GAAG,EAAE,SAAS,GAAG,CAAC;AAG9B,QAAO;EAAE,GAAG;EAAG,GAAG;EAAG"}