{"version":3,"file":"createSoloWorkflowFile.js","names":[],"sources":["../../../src/blocks/files/createSoloWorkflowFile.ts"],"sourcesContent":["import { createJobName } from \"./createJobName.js\";\nimport { formatWorkflowYaml } from \"./formatWorkflowYaml.js\";\n\ninterface WorkflowFileConcurrency {\n\t\"cancel-in-progress\"?: boolean;\n\tgroup: string;\n}\n\ninterface WorkflowFileOn {\n\tdiscussion?: {\n\t\ttypes?: string[];\n\t};\n\tdiscussion_comment?: {\n\t\ttypes?: string[];\n\t};\n\tissue_comment?: {\n\t\ttypes?: string[];\n\t};\n\tissues?: {\n\t\ttypes?: string[];\n\t};\n\tpull_request?:\n\t\t| null\n\t\t| string\n\t\t| {\n\t\t\t\tbranches?: string | string[];\n\t\t\t\ttypes?: string[];\n\t\t  };\n\tpull_request_review_comment?: {\n\t\ttypes: string[];\n\t};\n\tpull_request_target?: {\n\t\ttypes: string[];\n\t};\n\tpush?: {\n\t\tbranches: string[];\n\t};\n\trelease?: {\n\t\ttypes: string[];\n\t};\n\tworkflow_dispatch?: null | string;\n}\ninterface WorkflowFileOptions {\n\tconcurrency?: WorkflowFileConcurrency;\n\tif?: string;\n\tjobName?: string;\n\tname: string;\n\ton?: WorkflowFileOn;\n\tpermissions?: WorkflowFilePermissions;\n\tsteps: WorkflowFileStep[];\n}\n\ninterface WorkflowFilePermissions {\n\tcontents?: string;\n\tdiscussions?: string;\n\t\"id-token\"?: string;\n\tissues?: string;\n\t\"pull-requests\"?: string;\n}\n\ninterface WorkflowFileStep {\n\tenv?: Record<string, string>;\n\tid?: string;\n\tif?: string;\n\tname?: string;\n\trun?: string;\n\tuses?: string;\n\twith?: Record<string, unknown>;\n}\n\nexport function createSoloWorkflowFile({\n\tconcurrency,\n\tjobName,\n\tname,\n\ton,\n\tpermissions,\n\t...options\n}: WorkflowFileOptions) {\n\treturn formatWorkflowYaml({\n\t\tconcurrency,\n\t\tjobs: {\n\t\t\t[createJobName(jobName ?? name)]: {\n\t\t\t\t...(options.if && { if: options.if }),\n\t\t\t\t...(jobName && { name: jobName }),\n\t\t\t\t\"runs-on\": \"ubuntu-latest\",\n\t\t\t\tsteps: options.steps,\n\t\t\t},\n\t\t},\n\t\tname,\n\t\ton,\n\t\tpermissions,\n\t});\n}\n"],"mappings":";;;;AAsEA,SAAgB,uBAAuB,EACtC,aACA,SACA,MACA,IACA,aACA,GAAG,WACoB;AACvB,QAAO,mBAAmB;EACzB;EACA,MAAM,GACJ,cAAc,WAAW,KAAK,GAAG;GACjC,GAAI,QAAQ,MAAM,EAAE,IAAI,QAAQ,IAAI;GACpC,GAAI,WAAW,EAAE,MAAM,SAAS;GAChC,WAAW;GACX,OAAO,QAAQ;GACf,EACD;EACD;EACA;EACA;EACA,CAAC"}