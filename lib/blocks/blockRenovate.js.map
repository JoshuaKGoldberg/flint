{"version":3,"file":"blockRenovate.js","names":[],"sources":["../../src/blocks/blockRenovate.ts"],"sourcesContent":["import { z } from \"zod\";\n\nimport { base } from \"../base.js\";\nimport { blockGitHubApps } from \"./blockGitHubApps.js\";\nimport { intakeFileAsJson } from \"./intake/intakeFileAsJson.js\";\n\nconst zIgnoreDeps = z.array(z.string()).default([]);\n\nexport const blockRenovate = base.createBlock({\n\tabout: {\n\t\tname: \"Renovate\",\n\t},\n\taddons: {\n\t\tignoreDeps: zIgnoreDeps,\n\t},\n\tintake({ files }) {\n\t\tconst raw = intakeFileAsJson(files, [\".github\", \"renovate.json\"]);\n\n\t\treturn {\n\t\t\tignoreDeps: zIgnoreDeps.safeParse(raw?.ignoreDeps).data,\n\t\t};\n\t},\n\tproduce({ addons }) {\n\t\tconst { ignoreDeps } = addons;\n\n\t\treturn {\n\t\t\taddons: [\n\t\t\t\tblockGitHubApps({\n\t\t\t\t\tapps: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"Renovate\",\n\t\t\t\t\t\t\turl: \"https://github.com/apps/renovate\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t],\n\t\t\tfiles: {\n\t\t\t\t\".github\": {\n\t\t\t\t\t\"renovate.json\": JSON.stringify({\n\t\t\t\t\t\t$schema: \"https://docs.renovatebot.com/renovate-schema.json\",\n\t\t\t\t\t\tautomerge: true,\n\t\t\t\t\t\textends: [\n\t\t\t\t\t\t\t\":preserveSemverRanges\",\n\t\t\t\t\t\t\t\"config:best-practices\",\n\t\t\t\t\t\t\t\"replacements:all\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\tignoreDeps: Array.from(\n\t\t\t\t\t\t\tnew Set([\"codecov/codecov-action\", ...ignoreDeps]),\n\t\t\t\t\t\t).sort(),\n\t\t\t\t\t\tlabels: [\"dependencies\"],\n\t\t\t\t\t\tminimumReleaseAge: \"7 days\",\n\t\t\t\t\t\tpatch: { enabled: false },\n\t\t\t\t\t\tpostUpdateOptions: [\"pnpmDedupe\"],\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n});\n"],"mappings":";;;;;;AAMA,MAAM,cAAc,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC,QAAQ,EAAE,CAAC;AAEnD,MAAa,gBAAgB,KAAK,YAAY;CAC7C,OAAO,EACN,MAAM,YACN;CACD,QAAQ,EACP,YAAY,aACZ;CACD,OAAO,EAAE,SAAS;EACjB,MAAM,MAAM,iBAAiB,OAAO,CAAC,WAAW,gBAAgB,CAAC;AAEjE,SAAO,EACN,YAAY,YAAY,UAAU,KAAK,WAAW,CAAC,MACnD;;CAEF,QAAQ,EAAE,UAAU;EACnB,MAAM,EAAE,eAAe;AAEvB,SAAO;GACN,QAAQ,CACP,gBAAgB,EACf,MAAM,CACL;IACC,MAAM;IACN,KAAK;IACL,CACD,EACD,CAAC,CACF;GACD,OAAO,EACN,WAAW,EACV,iBAAiB,KAAK,UAAU;IAC/B,SAAS;IACT,WAAW;IACX,SAAS;KACR;KACA;KACA;KACA;IACD,YAAY,MAAM,KACjB,IAAI,IAAI,CAAC,0BAA0B,GAAG,WAAW,CAAC,CAClD,CAAC,MAAM;IACR,QAAQ,CAAC,eAAe;IACxB,mBAAmB;IACnB,OAAO,EAAE,SAAS,OAAO;IACzB,mBAAmB,CAAC,aAAa;IACjC,CAAC,EACF,EACD;GACD;;CAEF,CAAC"}